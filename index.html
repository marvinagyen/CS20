<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- JSON file must be online in order for CORS to work -->
    <script src = "songs.json"> </script>
    <!-- instead of using an array, use 11 individual objects -->


    <script>
      function loadFile() {
        /* Step 1: Make instance of request object...
        ...to make HTTP request after page is loaded*/
        request = new XMLHttpRequest();
        console.log("1 - request object created");

        // Step 2: Set the URL for the AJAX request to be the JSON file

        request.open("GET", "https://marvinagyen.github.io/CS20/songs.json", true);

        console.log("2 - opened request file");

        // Step 3: set up event handler/callback

        request.onreadystatechange = function() {
          console.log("3 - readystatechange event fired.");

          if (request.readyState == 4 && request.status == 200) {

            // Step 5: wait for done + success

            result = request.responseText;
            animals = JSON.parse(result);

            strHTML = "<ul>";
            songs.forEach(function(song) {
              strHTML += "<li>" + song.name + " : " + song.artist + "</li>";
            })
            strHTML += "</ul>";
            document.getElementById("data").innerHTML =strHTML;
          }
          else if (request.readyState == 4 && request.status != 200) {

          document.getElementById("data").innerHTML = "Something is wrong!  Check the logs to see where this went off the rails";

          }

          else if (request.readyState == 3) {

            document.getElementById("data").innerHTML = "Too soon!  Try again";

          }

        }
      // Step 4: fire off the HTTP request
        request.send();
        console.log("4 - Request sent");
      }
    </script>
  </head>
  <body onload="loadFile()">

    <div id="data">Loading...</div>


  </body>
</html>
